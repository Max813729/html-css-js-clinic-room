<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>リゾナスムービー</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex, nofollow" />
  <link rel="manifest" href="./manifest.json" />
  <meta name="apple-mobile-web-app-capable" content="yes">
	<link href="./css/style.css" rel="stylesheet" type="text/css" media="all">

</head>
<body>
  <video id="background-video" autoplay muted loop>
    <source src="https://clinicvideos.b-cdn.net/opening.mp4" type="video/mp4">
    お使いのブラウザは動画をサポートしていません。
  </video>

  <div class="header-container">
    <h2>ようこそ、リゾナスフェイスクリニック東京へ！</h2>
    <h1>お待ちいただいている間に、<br>クリニック限定動画をお楽しみいただけます。</h1>
  </div>
  
  <div id="menu">
    <div class="submenu">
      <div class="button-container">
        <button onclick="playVideo('https://clinicvideos.b-cdn.net/doctor2_1.mp4')">何から始めたらいいの？<br/>コスパの良い施術の組み立て方<span>松浦医師 (3分)</span></button>
      </div>
      <div class="button-container">
        <button  onclick="playVideo('https://clinicvideos.b-cdn.net/doctor2_2.mov')">目の下のクマ<span>松浦医師 (7分)</span></button>
      </div>
      <div class="button-container">
        <button  onclick="playVideo('https://clinicvideos.b-cdn.net/doctor2_3_v2.mov')">目の上のたるみ<span>松浦医師 (6分)</span></button>
      </div>
      <div class="button-container">
        <button  onclick="playVideo('https://clinicvideos.b-cdn.net/doctor2_4.mp4')">手の若返り<span>松浦医師 (5分)</span></button>
      </div>
    </div>
    <div class="submenu">
      <div class="button-container">
        <button  onclick="playVideo('https://clinicvideos.b-cdn.net/doctor5_1.mov')">術前ビジュアルカウンセリング<span>AYAKA (3分)</span></button>
      </div>
      <div class="button-container">
        <button  onclick="playVideo('https://clinicvideos.b-cdn.net/doctor5_2.mov')">ダウンタイムカバーメイク<span>AYAKA (4分)</span></button>
      </div>
      <div class="button-container">
        <button  onclick="playVideo('https://clinicvideos.b-cdn.net/doctor5_3.mov')">術後ビジュアルメイク<span>AYAKA (3分)</span></button>
      </div>
      <div class="button-container">
        <button  onclick="playVideo('https://clinicvideos.b-cdn.net/doctor5_4.mov')">パーソナルカラー診断<span>AYAKA (3分)</span></button>
      </div>
      <div class="button-container">
        <button  onclick="playVideo('https://clinicvideos.b-cdn.net/doctor5_7.mov')">医療アートメイク<span>AYAKA (3分)</span></button>
      </div>
    </div>
    <div class="submenu">
      <div class="button-container">
        <button  onclick="playVideo('https://clinicvideos.b-cdn.net/doctor5_1.mov')">術前ビジュアルカウンセリング<span>AYAKA (3分)</span></button>
      </div>
      <div class="button-container">
        <button  onclick="playVideo('https://clinicvideos.b-cdn.net/doctor5_2.mov')">ダウンタイムカバーメイク<span>AYAKA (4分)</span></button>
      </div>
      <div class="button-container">
        <button  onclick="playVideo('https://clinicvideos.b-cdn.net/doctor5_3.mov')">術後ビジュアルメイク<span>AYAKA (3分)</span></button>
      </div>
      <div class="button-container">
        <button  onclick="playVideo('https://clinicvideos.b-cdn.net/doctor5_4.mov')">パーソナルカラー診断<span>AYAKA (3分)</span></button>
      </div>
      <div class="button-container">
        <button  onclick="playVideo('https://clinicvideos.b-cdn.net/doctor5_7.mov')">医療アートメイク<span>AYAKA (3分)</span></button>
      </div>
    </div>
  </div>

  <div id="video-container">
    <video id="video" controls="false" playsinline preload="metadata"></video>
    <div id="close-button">
      <button onclick="shrinkVideoContainer()">閉じる</button>
    </div>
  </div>

  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./sw.js')
        .then(() => console.log("Service Worker registered."))
        .catch(err => console.error("SW registration failed:", err));
    }

    const video = document.getElementById('video');
    const menu = document.getElementById('menu');
    const container = document.getElementById('video-container');
    const closeBtn = document.getElementById('close-button');

    function playVideo(file) {
      menu.style.display = 'none';
      container.style.display = 'flex';
      setTimeout(() => container.classList.add('show'), 10);
      container.classList.remove('shrink');
      closeBtn.classList.remove('center');
      video.src = file;
      video.play();
      video.disablePictureInPicture = true;
      video.controlsList = 'nodownload nofullscreen noremoteplayback';
      video.onplay = () => {
        closeBtn.classList.remove('center');
        video.style.opacity = 1;
      };
      video.onended = () => {
        closeBtn.classList.add('center');
        video.style.opacity = 0.9;
      };
      video.onpause = () => {
        // Only show center close button if not at the end or if manually paused
        if (!video.ended) {
          closeBtn.classList.add('center');
          video.style.opacity = 0.9;
        }
      };
    }

    function shrinkVideoContainer() {
      closeBtn.classList.remove('center');
      video.pause();
      video.src = '';
      container.classList.remove('show');
      setTimeout(() => {
        container.style.display = 'none';
        menu.style.display = 'grid';
      }, 300);
    }
  </script>
</body>
</html>
